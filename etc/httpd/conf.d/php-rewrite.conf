<IfModule mod_rewrite.c>

    RewriteEngine on

    #RewriteBase /api/
    #[]

    # gen-db: generoidaan kannan tauluista suoraan. oltava ensimmäisenä
    RewriteRule ^/api/(.+)/gen/([^.]+)/?([^.]*)(.*)$ /api/gen-db.php?type=$1&taulu=$2&$3 [L]
    RewriteRule ^/api/(.+)/gen/?$ /api/gen-db.php?type=$1 [L]

#    RewriteRule ^/api/(.+)/alueluokitus/?([^.]*)(.*)$ /api/koodisto/alueluokitus.php?type=$1&$2 [L]
#    RewriteRule ^/api/(.+)/koulutusluokitus/?([^.]*)(.*)$ /api/koodisto/koulutusluokitus.php?type=$1&$2 [L]
#    RewriteRule ^/api/(.+)/oppilaitosluokitus/?([^.]*)(.*)$ /api/koodisto/oppilaitosluokitus.php?type=$1&$2 [L]
#    RewriteRule ^/api/(.+)/henkiloluokitus/?([^.]*)(.*)$ /api/koodisto/henkiloluokitus.php?type=$1&$2 [L]
 
    RewriteRule ^/api/(.+)/dimensio/alueluokitus/?([^.]*)(.*)$ /api/koodisto/alueluokitus.php?type=$1&$2 [L]
    RewriteRule ^/api/(.+)/dimensio/koulutusluokitus/?([^.]*)(.*)$ /api/koodisto/koulutusluokitus.php?type=$1&$2 [L]
    RewriteRule ^/api/(.+)/dimensio/oppilaitosluokitus/?([^.]*)(.*)$ /api/koodisto/oppilaitosluokitus.php?type=$1&$2 [L]
    RewriteRule ^/api/(.+)/dimensio/henkiloluokitus/?([^.]*)(.*)$ /api/koodisto/henkiloluokitus.php?type=$1&$2 [L]
    RewriteRule ^/api/(.+)/dimensio/([^.]+)/?([^.]*)(.*)$ /api/koodisto/koodistot.php?type=$1&koodisto=$2&$3 [L]

    RewriteRule ^/api/(.+)/koodisto/alueluokitus/?([^.]*)(.*)$ /api/koodisto/alueluokitus.php?type=$1&$2 [L]
    RewriteRule ^/api/(.+)/koodisto/koulutusluokitus/?([^.]*)(.*)$ /api/koodisto/koulutusluokitus.php?type=$1&$2 [L]
    RewriteRule ^/api/(.+)/koodisto/oppilaitosluokitus/?([^.]*)(.*)$ /api/koodisto/oppilaitosluokitus.php?type=$1&$2 [L]
    RewriteRule ^/api/(.+)/koodisto/henkiloluokitus/?([^.]*)(.*)$ /api/koodisto/henkiloluokitus.php?type=$1&$2 [L]
    RewriteRule ^/api/(.+)/koodisto-uusi/([^.]+)/?([^.]*)(.*)$ /api/koodisto/koodistot-uusi.php?type=$1&koodisto=$2&$3 [L]
    RewriteRule ^/api/(.+)/koodisto/([^.]+)/?([^.]*)(.*)$ /api/koodisto/koodistot.php?type=$1&koodisto=$2&$3 [L]
    
    # erityistapaus; listaa koodistot
    RewriteRule ^/api/(.+)/koodisto/?$ /api/koodisto/koodistot.php?type=$1 [L]

    RewriteRule ^/api/csv/(.+)/(.+)$ /api/$1/$2.php?type=csv [L]
    RewriteRule ^/api/tsv/(.+)/(.+)$ /api/$1/$2.php?type=tsv [L]
    RewriteRule ^/api/json/(.+)/(.+)$ /api/$1/$2.php?type=json [L]

    RewriteRule ^/api/([^/]+)/([^/]+)/?[?]?type=(.*)$ /api/$1/$2.php?type=$3 [L]
    RewriteRule ^/api/([^/]+)/([^/]+)/?[?]?(.*)$ /api/$1/$2.php?type=$3 [L]

</IfModule>

